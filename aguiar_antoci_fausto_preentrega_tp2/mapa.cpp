#include "mapa.h"

///////////////////////////////////////////////////////////////////////////
// Constructor: inicializa el mapa
///////////////////////////////////////////////////////////////////////////
Mapa::Mapa()
{
    data = {
        "##############################################",
        "#..#....................##......##.....##....#",
        "#..#..#############..#......##......#.....#..#",
        "#.....#......##......################..#######",
        "#######...#.......#..#..............#........#",
        "#.........#########..#..##########..##########",
        "#..####...#.......####..#........#...........>",
        "#..#..#........#..#...........#..#############",
        "#..#..##########..#..####.....#.......##.....#",
        "#..#...........#..#..#....#####..##.......#..#",
        "#..#..##########..#..######...#############..#",
        "#..#..#........#..#...........#..............#",
        "#..#..#..####..#..#..##########..#############",
        "#..#..#..#..#..#..#..#........#..#...........#",
        ".........#..#............#....#..#######..####",
        "####..####..######..#....#....#..#.....#..#..#",
        "#..#..#.............#....#....#..#######..#..#",
        "#..#..###############....#............#...#..#",
        "#..#...................##########..########..#",
        "#..##################..#.....#...........##..#",
        "#............................########........#",
        "##############################################"
    };

    filas = data.size();
    columnas = data[0].size();
}


///////////////////////////////////////////////////////////////////////////
// Dibujar el mapa
///////////////////////////////////////////////////////////////////////////
void Mapa::draw()
{
    for (int i = 0; i < filas; i++) {
        mvprintw(i + 1, 1, "%s", data[i].c_str());
    }
}


///////////////////////////////////////////////////////////////////////////
// Chequear si en (x,y) hay pared
///////////////////////////////////////////////////////////////////////////
bool Mapa::esPared(int x, int y)
{
     x -= 1;
     y -= 1;

    if (y < 0 || y >= filas || x < 0 || x >= columnas) 
        return true;

    return (data[y][x] == '#');    
}

bool Mapa::ganaste(int x, int y)
{
    x -= 1;
    y -= 1;

    if (y < 0 || y >= filas || x < 0 || x >= columnas) 
        return false;

    return (data[y][x] == '>');
}
