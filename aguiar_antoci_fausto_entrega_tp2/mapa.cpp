#include "mapa.h"

Mapa::Mapa()
{
    data = {
        "######################################################################################################################",
        ".......###...................................................#####..................................#####...........##",
        ".......###...................................................#####..................................#####...........##",
        "##.....###.....#################################.....###................#####...............###.............###..T..##",
        "##.....###.....#################################.....###................#####...............###.............###.....##",
        "##.............###..............######...............##########################################.....##################",
        "##.............###..............######...............##########################################.....##################",
        "##################.......##..................###.....###....................................###.....................##",
        "##################.......##..................###..T..###....................................###................T....##",
        "##.......................#######################.....###.....##########################.....##########################",
        "##.....###########.......##.T................###########.....###.....................##..T..#.......................>>",
        "##.....###########.......##..................###########.....###......T..............##.....#.......................>>",
        "##.....###..T..###....................##.....###.............................##......#################################",
        "##.....###.....###....................##.....###.............................##......#################################",
        "##.....###.....#########################.....###.....###########.............##...................#####.............##",
        "##.....###.....#########################.....###.....###########.............##...................#####.............##",
        "##..........................................................................................................###.....##",
        "##..........................................................................................................###.....##",
        "##.....###.....#########################.....###.....################........##################################.....##",
        "##.....###.....###.........T..........##.....###.............................##.....................................##",
        "##.....###.....###....................##.....###.............................##.....................................##",
        "##.....###.....###.....#########......##.....###.....##########################......#################################",
        "##.....###.....###.....#########......##.....###.....##########################......#################################",
        "##.....###.....###.....##..T..##......##.....###.....###.....................##......##.............................##",
        "##.....###.....###.....##.....##......##.....###.....###.................T...##......##..........................T..##",
        "##..............................................................##...........##......#######....#######.....##########",
        "##..............................................................##...........##......#######....#######.....##########",
        "##########.....##########.....###############......##...........##...........##......##.............###.....###.....##",
        "##########.....##########.....###############......##...........##...........##......##......T......###.....###..T..##",
        "##.....###.....###.T............................T..##...........##...........##......##################.....###.....##",
        "##..T..###.....######################################.......................................................###.....##",
        "##.....###.....######################################.......................................................###.....##",
        "##.....###................................................###########################.....#####################.....##",
        "##.....###.T..............................................###########################.....#####################.....##",
        "##.....##############################################.....###......T......###...T........................######.....##",
        "##.....##############################################.....###.............###............................######.....##",
        "##........................................................................#####################.....................##",
        "######################################################################################################################"
    };

    filas = data.size();
    columnas = data[0].size();
}

void Mapa::draw()
{
    for (int i = 0; i < filas; i++) {
        mvprintw(i + 1, 1, "%s", data[i].c_str());
    }
}

bool Mapa::esPared(int x, int y)
{
     x -= 1;
     y -= 1;

    if (y < 0 || y >= filas || x < 0 || x >= columnas) 
        return true;

    return (data[y][x] == '#');    
}

bool Mapa::ganaste(int x, int y)
{
    x -= 1;
    y -= 1;

    if (y < 0 || y >= filas || x < 0 || x >= columnas) 
        return false;

    return (data[y][x] == '>');
}

bool Mapa::objetos(int x, int y) 
{
    x -= 1;
    y -= 1;

    if (y >= 0 && y < filas && x >= 0 && x < columnas) 
    {
        if (data[y][x] == 'T') 
        {
            return true;
        }
    }
    return false;
}

void Mapa::recogerObjeto(int x, int y) 
{
    x -= 1;
    y -= 1;
    
    if (y >= 0 && y < filas && x >= 0 && x < columnas) 
    {
        if (data[y][x] == 'T') 
        {
            data[y][x] = '.';
        }
    }
}

void Mapa::abrirPuerta(int x, int y) 
{
    x -= 1;
    y -= 1;

    if (y >= 0 && y < filas && x >= 0 && x < columnas) 
    {
        if (data[y][x] == '#') 
        {
            data[y][x] = '.';
        }
    }
}